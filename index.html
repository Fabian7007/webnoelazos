<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Accesorios para el cabello - Lazos, mo침os, scrunchies y m치s. Productos de alta calidad."
    />
    <meta
      name="keywords"
      content="accesorios cabello, lazos, mo침os, scrunchies, colitas, set mo침os"
    />
    <title>Accesorios para el Cabello | Lazos, Mo침os y Scrunchies</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="content/products.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&family=Tilt+Neon&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="content/content.css" />
    <link rel="stylesheet" href="auth.css" />
    <link rel="stylesheet" href="user-dropdown.css" />
    <link rel="stylesheet" href="user-panel-effects.css" />
    <link rel="stylesheet" href="dark-theme.css" />
    <link rel="stylesheet" href="admin-products.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/img-galery/logo.svg" />
    <link rel="alternate icon" href="/favicon.ico" />

    <!-- Preload critical resources -->
    <link
      rel="preload"
      href="/img-galery/logo.svg"
      as="image"
      type="image/svg+xml"
    />
  </head>
  <body class="loading">
    <!-- Initial Loading Screen -->
    <div class="initial-loader" role="status" aria-label="Cargando contenido">
      <div class="logo-container">
        <img
          class="loader-logo"
          src="/img-galery/logo.svg"
          alt="Logo de Accesorios"
        />
        <div class="loader-text" aria-live="polite">Cargando productos...</div>
        <div
          class="loader-progress"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="100"
        >
          <div class="loader-progress-bar"></div>
        </div>
      </div>
    </div>

    <!-- Skeleton Loader -->
    <div class="skeleton-loader" aria-hidden="true">
      <div class="skeleton-header">
        <div class="skeleton-header-content">
          <div class="skeleton-menu-toggle"></div>
          <div class="skeleton-logo"></div>
          <div class="skeleton-header-icons">
            <div class="skeleton-search-icon"></div>
            <div class="skeleton-cart-icon">
              <div class="skeleton-cart-count"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="skeleton-section-title"></div>

      <!-- Improved skeleton carousel with rectangular container -->
      <div class="skeleton-carousel-wrapper">
        <div class="skeleton-carousel-container">
          <div class="skeleton-carousel-nav skeleton-carousel-nav-left"></div>
          <div class="skeleton-carousel-content">
            <div class="skeleton-carousel-main"></div>
            <div class="skeleton-carousel-sides">
              <div
                class="skeleton-carousel-side skeleton-carousel-side-left"
              ></div>
              <div
                class="skeleton-carousel-side skeleton-carousel-side-right"
              ></div>
            </div>
          </div>
          <div class="skeleton-carousel-nav skeleton-carousel-nav-right"></div>
        </div>
        <div class="skeleton-carousel-indicators">
          <div class="skeleton-indicator"></div>
          <div class="skeleton-indicator skeleton-indicator-active"></div>
          <div class="skeleton-indicator"></div>
          <div class="skeleton-indicator"></div>
          <div class="skeleton-indicator"></div>
        </div>
      </div>

      <div class="skeleton-filters">
        <div class="skeleton-filter-select"></div>
        <div class="skeleton-filter-select"></div>
        <div class="skeleton-clear-btn"></div>
      </div>

      <div class="skeleton-products">
        <div class="skeleton-card">
          <div class="skeleton-img">
            <div class="skeleton-add-to-cart-btn"></div>
          </div>
          <div class="skeleton-info">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton-img">
            <div class="skeleton-add-to-cart-btn"></div>
          </div>
          <div class="skeleton-info">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton-img">
            <div class="skeleton-add-to-cart-btn"></div>
          </div>
          <div class="skeleton-info">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton-img">
            <div class="skeleton-add-to-cart-btn"></div>
          </div>
          <div class="skeleton-info">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton-img">
            <div class="skeleton-add-to-cart-btn"></div>
          </div>
          <div class="skeleton-info">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton-img">
            <div class="skeleton-add-to-cart-btn"></div>
          </div>
          <div class="skeleton-info">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Header -->
    <header class="header" role="banner">
      <div class="header-content">
        <div class="header-icons-left">
          <button
            class="menu-toggle"
            id="menuToggle"
            aria-label="Abrir men칰 de navegaci칩n"
            aria-expanded="false"
            aria-controls="mobileMenu"
          >
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </button>
          <button class="account-toggle" aria-label="Cuenta de usuario">
            <img
              src="/img-galery/account.svg"
              alt="Cuenta"
              class="account-icon"
            />
          </button>
        </div>

        <img class="logo" src="/img-galery/logo.svg" alt="Logo de Accesorios" />

        <div class="header-icons-right">
          <button
            class="search-toggle"
            id="searchToggle"
            aria-label="Abrir b칰squeda"
            aria-expanded="false"
            aria-controls="searchDropdown"
          >
            <img
              src="/img-galery/search-icon.svg"
              alt="Buscar"
              class="search-icon"
            />
          </button>
          <div
            class="cart-toggle"
            id="cartToggle"
            aria-label="Carrito de compras"
          >
            <img
              src="/img-galery/icon-carrito.svg"
              alt="Carrito"
              class="cart-icon"
            />
            <span class="cart-count" id="cartCount">0</span>
          </div>
        </div>
      </div>

      <!-- Search Dropdown -->
      <div
        class="search-dropdown"
        id="searchDropdown"
        role="search"
        aria-hidden="true"
      >
        <div class="search-container">
          <input
            type="text"
            id="searchInput"
            placeholder="Buscar productos..."
            aria-label="Campo de b칰squeda de productos"
            autocomplete="off"
            role="combobox"
            aria-haspopup="listbox"
            aria-expanded="false"
            aria-controls="autocomplete-results"
          />
          <div
            id="autocomplete-results"
            class="autocomplete-results"
            role="listbox"
          ></div>
          <button
            class="search-close"
            id="searchClose"
            aria-label="Cerrar b칰squeda"
          >
            칑
          </button>
        </div>
      </div>

      <div
        class="cart-dropdown"
        id="cartDropdown"
        aria-label="Detalle del carrito"
      >
        <div class="cart-header">
          <h3>Carrito de Compras</h3>
          <button class="cart-close" id="cartClose" aria-label="Cerrar carrito">
            칑
          </button>
        </div>
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-summary">
          <p>Total: $<span id="cartTotal">0</span></p>
          <button class="checkout-btn">Finalizar Compra</button>
        </div>
      </div>
    </header>

    <!-- Mobile Navigation Menu -->
    <nav
      class="mobile-menu"
      id="mobileMenu"
      role="navigation"
      aria-label="Men칰 principal"
      aria-hidden="true"
    >
      <div class="menu-header">
        <h4>Men칰 Principal</h4>
      </div>
      <ul class="menu-list" role="list">
        <li role="listitem">
          <a
            href="#inicio"
            onclick="event.preventDefault(); showSection('inicio')"
            aria-label="Ir a la secci칩n de inicio"
            class="menu-link"
          >
            <span>Inicio</span>
          </a>
        </li>
        <li role="listitem">
          <a
            href="#lazos"
            onclick="event.preventDefault(); showSection('lazos')"
            aria-label="Ir a la secci칩n de lazos"
            class="menu-link"
          >
            <span>Lazos</span>
          </a>
        </li>
        <li role="listitem">
          <a
            href="#monos"
            onclick="event.preventDefault(); showSection('monos')"
            aria-label="Ir a la secci칩n de mo침os"
            class="menu-link"
          >
            <span>Mo침os</span>
          </a>
        </li>
        <li role="listitem">
          <a
            href="#colitas"
            onclick="event.preventDefault(); showSection('colitas')"
            aria-label="Ir a la secci칩n de colitas"
            class="menu-link"
          >
            <span>Colitas</span>
          </a>
        </li>
        <li role="listitem">
          <a
            href="#scrunchies"
            onclick="event.preventDefault(); showSection('scrunchies')"
            aria-label="Ir a la secci칩n de scrunchies"
            class="menu-link"
          >
            <span>Scrunchies</span>
          </a>
        </li>
        <li role="listitem">
          <a
            href="#setmonos"
            onclick="event.preventDefault(); showSection('setmonos')"
            aria-label="Ir a la secci칩n de set de mo침os"
            class="menu-link"
          >
            <span>Set Mo침os</span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- Menu Overlay -->
    <div class="menu-overlay" id="menuOverlay" aria-hidden="true"></div>

    <!-- User Dropdown Menu -->
    <div id="userDropdown" class="user-dropdown" style="display: none">
      <div class="user-dropdown-content">
        <div class="dropdown-item" id="viewProfileBtn">
          <img src="/img-galery/profile.svg" alt="" class="dropdown-icon" />
          <span>Ver Perfil</span>
        </div>
        <div class="dropdown-item" id="viewNotificationsBtn">
          <img src="/img-galery/bell.svg" alt="" class="dropdown-icon" />
          <span>Notificaciones</span>
        </div>
        <div class="dropdown-item" id="themeToggleBtn">
          <img src="/img-galery/moon.svg" alt="" class="dropdown-icon" />
          <span>Tema Oscuro</span>
        </div>
        <div class="dropdown-item logout" id="logoutDropdownBtn">
          <img src="/img-galery/logout.svg" alt="" class="dropdown-icon" />
          <span>Cerrar Sesi칩n</span>
        </div>
      </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="auth-modal" style="display: none">
      <div class="auth-modal-content">
        <button class="auth-close">
          <img src="/img-galery/close.svg" alt="Cerrar" />
        </button>
        <div class="auth-tabs" id="authTabs">
          <button class="auth-tab active" data-tab="login">
            Iniciar Sesi칩n
          </button>
          <button class="auth-tab" data-tab="register">Registrarse</button>
        </div>

        <div class="user-tabs" id="userTabs" style="display: none">
          <button class="user-tab active" data-tab="profile"><img src="/img-galery/profile.svg" alt="" style="width: 16px; height: 16px; margin-right: 4px; vertical-align: middle;" /> Perfil</button>
          <button class="user-tab" data-tab="stats"><img src="/img-galery/stats.svg" alt="" style="width: 16px; height: 16px; margin-right: 4px; vertical-align: middle;" /> Stats</button>
          <button class="user-tab" data-tab="likes"><img src="/img-galery/heartprofile.svg" alt="" style="width: 16px; height: 16px; margin-right: 4px; vertical-align: middle;" /> Likes</button>
          <button class="user-tab" data-tab="settings"><img src="/img-galery/settings.svg" alt="" style="width: 16px; height: 16px; margin-right: 4px; vertical-align: middle;" /> Config</button>
        </div>

        <div id="loginForm" class="auth-form active">
          <h3>Iniciar Sesi칩n</h3>
          <div class="input-group">
            <input
              type="text"
              id="loginEmail"
              placeholder="Correo electr칩nico o nombre de usuario"
              required
            />
          </div>
          <div class="input-group">
            <div class="password-input-container">
              <input
                type="password"
                id="loginPassword"
                placeholder="Contrase침a"
                required
              />
              <button
                type="button"
                class="password-toggle"
                data-target="loginPassword"
              >
                <img src="/img-galery/ojos.svg" alt="Mostrar contrase침a" />
              </button>
            </div>
          </div>
          <button id="loginBtn" class="auth-btn">Iniciar Sesi칩n</button>
          <div class="forgot-password">
            <a href="#" id="forgotPasswordLink">쯆lvidaste tu contrase침a?</a>
          </div>
          <div class="auth-divider">- o -</div>
          <button id="googleLoginBtn" class="google-btn">
            <img src="/img-galery/Google.png" alt="Google" />
            Continuar con Google
          </button>
        </div>

        <div id="registerForm" class="auth-form compact">
          <h3>Crear Cuenta</h3>
          <div class="input-row">
            <div class="input-group half">
              <input
                type="text"
                id="registerUsername"
                placeholder="Usuario (m치x. 15)"
                maxlength="15"
                required
              />
            </div>
            <div class="input-group half">
              <input
                type="email"
                id="registerEmail"
                placeholder="Email"
                required
              />
            </div>
          </div>
          <div class="input-row">
            <div class="input-group half">
              <div class="password-input-container">
                <input
                  type="password"
                  id="registerPassword"
                  placeholder="Contrase침a (m칤n. 6)"
                  required
                />
                <button
                  type="button"
                  class="password-toggle"
                  data-target="registerPassword"
                >
                  <img src="/img-galery/ojos.svg" alt="Mostrar contrase침a" />
                </button>
              </div>
              <div class="password-strength">
                <div
                  class="password-strength-bar"
                  id="passwordStrengthBar"
                ></div>
              </div>
            </div>
            <div class="input-group half">
              <div class="password-input-container">
                <input
                  type="password"
                  id="confirmPassword"
                  placeholder="Repetir contrase침a"
                  required
                />
                <button
                  type="button"
                  class="password-toggle"
                  data-target="confirmPassword"
                >
                  <img src="/img-galery/ojos.svg" alt="Mostrar contrase침a" />
                </button>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label class="profile-image-label">Foto de perfil</label>
            <input
              type="file"
              id="profileImage"
              accept="image/*"
              class="profile-image-input"
              placeholder="Foto (opcional)"
            />
          </div>
          <div class="captcha-container compact">
            <div class="captcha-question">Escribe lo que ves:</div>
            <div class="captcha-row">
              <canvas id="captchaCanvas" width="100" height="30"></canvas>
              <button type="button" id="refreshCaptcha" class="refresh-captcha">
                <img
                  src="/img-galery/reset.svg"
                  alt="Regenerar"
                  width="14"
                  height="14"
                />
              </button>
              <input
                type="text"
                id="captchaInput"
                class="captcha-input"
                placeholder="N칰meros"
                maxlength="5"
                required
              />
            </div>
          </div>
          <button id="registerBtn" class="auth-btn">Crear Cuenta</button>
        </div>

        <div id="userProfile" class="user-profile" style="display: none">
          <h3>Mi Perfil</h3>
          <div class="profile-header">
            <div class="profile-picture-container">
              <img
                id="userProfilePic"
                class="profile-picture"
                src=""
                alt="Foto de perfil"
              />
              <div class="status-indicator" id="userStatusIndicator"></div>
            </div>
            <div class="profile-name">
              <h4 id="userDisplayNameHeader"></h4>
            </div>
          </div>
          <div class="user-info">
            <div class="user-info-item">
              <span class="user-info-label">Email:</span>
              <span class="user-info-value" id="userEmail"></span>
            </div>
            <div class="user-info-item">
              <span class="user-info-label">Cuenta creada:</span>
              <span class="user-info-value" id="userCreated"></span>
            </div>
            <div class="user-info-item">
              <span class="user-info-label">칔ltima conexi칩n:</span>
              <span class="user-info-value" id="userLastLogin"></span>
            </div>
            <div class="user-info-item">
              <span class="user-info-label">Rango:</span>
              <span class="user-info-value" id="userRole"></span>
            </div>
            <div
              class="user-info-item"
              id="tempPasswordItem"
              style="display: none"
            >
              <span class="user-info-label">Contrase침a temporal:</span>
              <span class="user-info-value" id="userTempPassword"></span>
            </div>
            <div
              class="user-info-item"
              id="loginOptionsItem"
              style="display: none"
            >
              <span class="user-info-label">Opciones de login:</span>
              <span class="user-info-value" id="userLoginOptions"></span>
            </div>
          </div>
          <button
            id="editProfileBtn"
            class="auth-btn"
            style="margin-bottom: 0.5rem"
          >
            Editar Perfil
          </button>
          <button id="logoutBtn" class="logout-btn">Cerrar Sesi칩n</button>
        </div>

        <div id="userLikes" class="user-content" style="display: none">
          <h3>Mis Productos Favoritos</h3>
          <div class="likes-header">
            <div class="likes-count">
              Total: <span id="likesCount">0</span> productos
            </div>
            <button class="clear-likes-btn" id="clearLikesBtn">
              Limpiar Todo
            </button>
          </div>
          <div class="likes-grid" id="likesGrid">
            <p class="empty-state">No tienes productos en favoritos a칰n</p>
          </div>
        </div>

        <div id="userStats" class="user-content" style="display: none">
          <h3>Mis Estad칤sticas</h3>
          <div class="stats-container">
            <div class="stat-card">
              <img src="/img-galery/heartprofile.svg" alt="" class="stat-icon" style="width: 2rem; height: 2rem;" />
              <div class="stat-number" id="totalLikes">0</div>
              <div class="stat-label">Productos Favoritos</div>
            </div>
            <div class="stat-card">
              <img src="/img-galery/star.svg" alt="" class="stat-icon" style="width: 2rem; height: 2rem;" />
              <div class="stat-number" id="userLevel">1</div>
              <div class="stat-label">Nivel de Usuario</div>
            </div>
          </div>

        </div>



        <div id="userNotifications" class="user-content" style="display: none">
          <h3>Notificaciones</h3>
          <div class="notifications-container">
            <div class="notification-filters">
              <button class="notif-filter active" data-filter="all">
                Todas
              </button>
              <button class="notif-filter" data-filter="system">Sistema</button>
              <button class="notif-filter" data-filter="offers">Ofertas</button>
            </div>
            <div class="notifications-list" id="notificationsList">
              <div class="notification-item unread">
                <div class="notif-icon">游꿀</div>
                <div class="notif-content">
                  <div class="notif-title">춰Bienvenido!</div>
                  <div class="notif-text">Gracias por crear tu cuenta</div>
                  <div class="notif-time">Hace 1 d칤a</div>
                </div>
              </div>
            </div>
            <div class="notifications-actions">
              <button class="clear-notif-btn" id="clearNotificationsBtn">
                Limpiar Todo
              </button>
            </div>
          </div>
        </div>

        <div id="userSettings" class="user-content" style="display: none">
          <h3>Configuraci칩n de Cuenta</h3>
          <div class="settings-container">
            <div class="setting-group">
              <h4>Notificaciones</h4>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="emailNotifications" checked />
                  <span class="setting-toggle"></span>
                  Notificaciones por email
                </label>
              </div>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="promotionNotifications" checked />
                  <span class="setting-toggle"></span>
                  Ofertas y promociones
                </label>
              </div>
            </div>

            <div class="setting-group">
              <h4>Apariencia</h4>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="animationsEnabled" checked />
                  <span class="setting-toggle"></span>
                  Animaciones mejoradas
                </label>
              </div>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="compactMode" />
                  <span class="setting-toggle"></span>
                  Modo compacto
                </label>
              </div>
            </div>

            <div class="setting-group">
              <h4>Privacidad</h4>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="profilePublic" />
                  <span class="setting-toggle"></span>
                  Perfil p칰blico
                </label>
              </div>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="activityVisible" />
                  <span class="setting-toggle"></span>
                  Mostrar actividad
                </label>
              </div>
            </div>

            <div class="setting-group danger-zone">
              <h4>Zona Peligrosa</h4>
              <button class="danger-btn" id="deleteAccountBtn">
                Eliminar Cuenta
              </button>
              <p class="danger-text">Esta acci칩n no se puede deshacer</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Container -->
    <div class="container">
      <!-- Section Title -->
      <div class="section-title-wrapper">
        <h1 class="section-title" id="sectionTitle">Productos Destacados</h1>
        <p
          class="search-term-display"
          id="searchTermDisplay"
          aria-live="polite"
        ></p>
        <div class="title-underline" aria-hidden="true"></div>
      </div>

      <!-- Carousel Section -->
      <section
        id="carousel-section"
        class="section"
        style="display: block"
        aria-label="Carrusel de productos destacados"
      >
        <div class="carousel-boundary-container">
          <div
            id="carousel-announcer"
            class="visually-hidden"
            aria-live="polite"
            aria-atomic="true"
          ></div>
          <div class="minimal-carousel-container">
            <div class="carousel-wrapper">
              <button
                class="minimal-carousel-nav prev"
                id="minimalCarouselPrev"
                aria-label="Producto anterior"
                type="button"
              >
                <i class="fas fa-chevron-left" aria-hidden="true"></i>
              </button>

              <ul
                class="minimal-carousel-track"
                id="minimalCarouselTrack"
                role="region"
                aria-label="Productos en carrusel"
                aria-live="polite"
              ></ul>

              <button
                class="minimal-carousel-nav next"
                id="minimalCarouselNext"
                aria-label="Siguiente producto"
                type="button"
              >
                <i class="fas fa-chevron-right" aria-hidden="true"></i>
              </button>
            </div>

            <div
              class="minimal-carousel-indicators"
              id="minimalCarouselIndicators"
              role="tablist"
              aria-label="Indicadores de productos"
            ></div>
          </div>
        </div>
      </section>

      <!-- Admin Add Product Button -->
      <div class="admin-controls" id="adminControls" style="display: none;">
        <button id="addProductBtn" class="add-product-btn">
          <span style="font-size: 16px; margin-right: 8px;">+</span>
          Agregar Producto
        </button>
      </div>

      <!-- Filters Bar -->
      <div
        class="filters-bar"
        id="mainFiltersBar"
        role="toolbar"
        aria-label="Filtros de productos"
      >
        <div class="filters">
          <select id="statusFilter" aria-label="Filtrar productos por estado">
            <option value="">Filtrar por estado</option>
            <option value="nuevo">Nuevos</option>
            <option value="oferta">En Oferta</option>
            <option value="agotado">Agotados</option>
          </select>
          <select id="colorFilter" aria-label="Filtrar productos por color">
            <option value="">Filtrar por color</option>
            <option value="Rosa">Rosa</option>
            <option value="Azul">Azul</option>
            <option value="Rojo">Rojo</option>
            <option value="Amarillo">Amarillo</option>
            <option value="Blanco">Blanco</option>
            <option value="Gris">Gris</option>
            <option value="Negro">Negro</option>
            <option value="Verde">Verde</option>
            <option value="Dorado">Dorado</option>
            <option value="Plateado">Plateado</option>
            <option value="Multicolor">Multicolor</option>
            <option value="Naranja">Naranja</option>
            <option value="P칰rpura">P칰rpura</option>
          </select>
          <select
            id="telaFilter"
            aria-label="Filtrar productos por tipo de tela"
          >
            <option value="">Filtrar por tela</option>
            <option value="Seda">Seda</option>
            <option value="Algod칩n">Algod칩n</option>
            <option value="Gamuza">Gamuza</option>
            <option value="Lana">Lana</option>
            <option value="Sint칠tico">Sint칠tico</option>
            <option value="Terciopelo">Terciopelo</option>
            <option value="Licra">Licra</option>
            <option value="Poli칠ster">Poli칠ster</option>
          </select>
          <button
            id="clearFilters"
            class="clear-btn"
            type="button"
            aria-label="Limpiar todos los filtros"
          >
            Limpiar filtros
          </button>
        </div>
      </div>

      <!-- Main Content -->
      <main class="main-content" role="main">
        <section
          id="inicio"
          class="section active"
          aria-label="Secci칩n de inicio"
        ></section>
        <section
          id="lazos"
          class="section"
          aria-label="Secci칩n de lazos"
        ></section>
        <section
          id="monos"
          class="section"
          aria-label="Secci칩n de mo침os"
        ></section>
        <section
          id="colitas"
          class="section"
          aria-label="Secci칩n de colitas"
        ></section>
        <section
          id="scrunchies"
          class="section"
          aria-label="Secci칩n de scrunchies"
        ></section>
        <section
          id="setmonos"
          class="section"
          aria-label="Secci칩n de set de mo침os"
        ></section>

        <div class="info-footer" id="infoFooter" role="contentinfo"></div>
      </main>
    </div>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
      <div class="footer-content">
        <div
          class="social-links"
          role="list"
          aria-label="Enlaces de redes sociales"
        >
          <a
            href="https://www.instagram.com/yourprofile"
            target="_blank"
            aria-label="Visitar nuestro perfil de Instagram (se abre en una nueva ventana)"
            rel="noopener noreferrer"
            role="listitem"
          >
            <i class="fab fa-instagram" aria-hidden="true"></i>
          </a>
          <a
            href="https://www.facebook.com/yourprofile"
            target="_blank"
            aria-label="Visitar nuestro perfil de Facebook (se abre en una nueva ventana)"
            rel="noopener noreferrer"
            role="listitem"
          >
            <i class="fab fa-facebook-f" aria-hidden="true"></i>
          </a>
          <a
            href="https://www.tiktok.com/@yourprofile"
            target="_blank"
            aria-label="Visitar nuestro perfil de TikTok (se abre en una nueva ventana)"
            rel="noopener noreferrer"
            role="listitem"
          >
            <i class="fab fa-tiktok" aria-hidden="true"></i>
          </a>
          <a
            href="https://wa.me/YOUR_WHATSAPP_NUMBER"
            target="_blank"
            aria-label="Contactar por WhatsApp (se abre en una nueva ventana)"
            rel="noopener noreferrer"
            role="listitem"
          >
            <i class="fab fa-whatsapp" aria-hidden="true"></i>
          </a>
        </div>
        <p>
          &copy; 2024 Accesorios para el Cabello. Todos los derechos reservados.
        </p>
      </div>
    </footer>

    <!-- Scripts -->
    <script type="module" src="firebase.js"></script>
    <script type="module" src="firestore-functions.js"></script>
    <script src="data.js"></script>
    <script src="content/content.js"></script>
    <script src="script.js"></script>
    <script
      src="https://challenges.cloudflare.com/turnstile/v0/api.js"
      async
      defer
    ></script>
    <script src="turnstile-config.js"></script>
    <script src="auth.js"></script>
    <script src="user-panel-enhanced.js"></script>
    <script src="user-panel-config.js"></script>
    <script src="admin-products.js"></script>


    <!-- Enhanced Loading and Initialization Script -->
    <script>
      // Error handling wrapper
      function safeExecute(fn, errorContext = "Unknown") {
        try {
          return fn();
        } catch (error) {
          console.error(`Error in ${errorContext}:`, error);
          return null;
        }
      }

      // Initial loading screen with improved progress simulation
      document.addEventListener("DOMContentLoaded", () => {
        // Check if the site has been loaded once in this session
        if (sessionStorage.getItem("siteLoadedOnce")) {
          // If so, hide loaders immediately without animations
          document.body.classList.remove("loading");
          const initialLoader = document.querySelector(".initial-loader");
          if (initialLoader) {
            initialLoader.style.display = "none";
          }
        } else {
          // This is the first visit in the session, show the loaders and animations.
          safeExecute(() => {
            const progressBar = document.querySelector(".loader-progress-bar");
            const loaderText = document.querySelector(".loader-text");

            if (progressBar && loaderText) {
              let progress = 0;
              const messages = [
                "Cargando productos...",
                "Preparando carrusel...",
                "Configurando filtros...",
                "Casi listo...",
              ];
              let messageIndex = 0;

              const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;

                progressBar.style.width = progress + "%";
                progressBar.setAttribute("aria-valuenow", Math.round(progress));

                if (
                  progress > messageIndex * 25 &&
                  messageIndex < messages.length
                ) {
                  loaderText.textContent = messages[messageIndex];
                  messageIndex++;
                }

                if (progress >= 100) {
                  clearInterval(interval);
                  loaderText.textContent = "춰Listo!";
                  setTimeout(() => {
                    const initialLoader =
                      document.querySelector(".initial-loader");
                    if (initialLoader) {
                      initialLoader.classList.add("fade-out");
                      initialLoader.setAttribute("aria-hidden", "true");
                      setTimeout(() => {
                        initialLoader.style.display = "none";
                      }, 800);
                    }
                  }, 500);
                }
              }, 100);
            }
          }, "Initial loader setup");

          // Hide skeleton loader after a reasonable time
          setTimeout(() => {
            safeExecute(() => {
              document.body.classList.remove("loading");
              const skeletonLoader = document.querySelector(".skeleton-loader");
              if (skeletonLoader) {
                skeletonLoader.setAttribute("aria-hidden", "true");
              }
            }, "Skeleton loader removal");
          }, 3500); // Reduced from 6.5s to 3.5s

          // Set the flag so this doesn't run again in this session
          sessionStorage.setItem("siteLoadedOnce", "true");
        }
      });

      // Enhanced section management with carousel integration
      const originalShowSection = window.showSection;
      window.showSection = function (seccion) {
        // Don't interfere if modal is open
        if (
          document.getElementById("authModal") &&
          document.getElementById("authModal").style.display === "flex"
        ) {
          return;
        }

        safeExecute(() => {
          // Call original function if it exists
          if (
            originalShowSection &&
            typeof originalShowSection === "function"
          ) {
            originalShowSection(seccion);
          }

          // Handle carousel visibility with error handling
          if (
            window.handleMinimalCarouselSectionChange &&
            typeof window.handleMinimalCarouselSectionChange === "function"
          ) {
            window.handleMinimalCarouselSectionChange(seccion);
          }

          // Update ARIA attributes for sections
          document.querySelectorAll(".section").forEach((section) => {
            const isActive = section.id === seccion;
            section.setAttribute("aria-hidden", !isActive);
          });

          // Update page title based on section
          const sectionTitles = {
            inicio: "Productos Destacados",
            lazos: "Lazos para el Cabello",
            monos: "Mo침os para el Cabello",
            colitas: "Colitas para el Cabello",
            scrunchies: "Scrunchies para el Cabello",
            setmonos: "Set de Mo침os",
          };

          const newTitle = sectionTitles[seccion] || "Productos Destacados";
          document.title = `${newTitle} | Accesorios para el Cabello`;

          const sectionTitleElement = document.getElementById("sectionTitle");
          if (sectionTitleElement) {
            sectionTitleElement.textContent = newTitle;
          }
        }, "Section change handling");
      };

      // Initialize carousel after everything loads
      window.addEventListener("load", function () {
        setTimeout(function () {
          safeExecute(() => {
            if (
              window.handleMinimalCarouselSectionChange &&
              typeof window.handleMinimalCarouselSectionChange === "function"
            ) {
              window.handleMinimalCarouselSectionChange("inicio");
            }
          }, "Carousel initialization");
        }, 100);
      });

      // Enhanced error handling for images
      function handleImageError(
        img,
        fallbackSrc = "/img-galery/placeholder.jpg"
      ) {
        if (img && img.src !== fallbackSrc) {
          img.onerror = null; // Prevent infinite loop
          img.src = fallbackSrc;
          img.classList.add("image-error");
          img.setAttribute(
            "alt",
            img.getAttribute("alt") + " (imagen no disponible)"
          );
        }
      }

      // Global error handler
      window.addEventListener("error", function (e) {
        if (e.target && e.target.tagName === "IMG") {
          handleImageError(e.target);
        }
        console.error("Global error:", e.error);
      });

      // Unhandled promise rejection handler
      window.addEventListener("unhandledrejection", function (e) {
        console.error("Unhandled promise rejection:", e.reason);
      });

      // Performance monitoring (optional)
      if ("performance" in window) {
        window.addEventListener("load", function () {
          setTimeout(function () {
            const perfData = performance.getEntriesByType("navigation")[0];
            if (perfData) {
              console.log(
                "Page load time:",
                perfData.loadEventEnd - perfData.loadEventStart,
                "ms"
              );
            }
          }, 0);
        });
      }

      // Service worker registration (optional, for future PWA support)
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          // Uncomment when you have a service worker
          // navigator.serviceWorker.register('/sw.js')
          //   .then(function(registration) {
          //     console.log('SW registered: ', registration);
          //   })
          //   .catch(function(registrationError) {
          //     console.log('SW registration failed: ', registrationError);
          //   });
        });
      }
    </script>

  </body>
</html>

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Detalle del Producto</title>
    <link rel="stylesheet" href="../styles.css" />
    <link rel="stylesheet" href="details.css" />
    <link rel="stylesheet" href="../auth.css" />
    <link rel="stylesheet" href="../user-dropdown.css" />
    <link rel="stylesheet" href="../user-panel-effects.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&family=Tilt+Neon&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="header">
      <div class="header-content">
        <div class="header-icons-left">
          <button class="menu-toggle" id="menuToggle" aria-label="Abrir men√∫">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </button>
          <button
            class="account-toggle"
            aria-label="Cuenta de usuario"
          >
            <img
              src="../img-galery/account.svg"
              alt="Cuenta"
              class="account-icon"
            />
          </button>
        </div>
        <img class="logo" src="/img-galery/logo.svg" alt="Logo" />
        <div class="header-icons-right">
          <button class="search-toggle" id="searchToggle" aria-label="Buscar">
            <img
              src="/img-galery/search-icon.svg"
              alt="Buscar"
              class="search-icon"
            />
          </button>
          <div
            class="cart-toggle"
            id="cartToggle"
            aria-label="Carrito de compras"
          >
            <img
              src="/img-galery/icon-carrito.svg"
              alt="Carrito"
              class="cart-icon"
            />
          </div>
        </div>
      </div>

      <!-- Search Dropdown with Autocomplete -->
      <div
        class="search-dropdown"
        id="searchDropdown"
        role="search"
        aria-hidden="true"
      >
        <div class="search-container">
          <input
            type="text"
            id="searchInput"
            placeholder="Buscar productos..."
            aria-label="Campo de b√∫squeda de productos"
            autocomplete="off"
            role="combobox"
            aria-haspopup="listbox"
            aria-expanded="false"
            aria-controls="autocomplete-results"
          />
          <div
            id="autocomplete-results"
            class="autocomplete-results"
            role="listbox"
          ></div>
          <button
            class="search-close"
            id="searchClose"
            aria-label="Cerrar b√∫squeda"
          >
            √ó
          </button>
        </div>
      </div>

      <div
        class="cart-dropdown"
        id="cartDropdown"
        aria-label="Detalle del carrito"
      >
        <div class="cart-header">
          <h3>Carrito de Compras</h3>
          <button class="cart-close" id="cartClose" aria-label="Cerrar carrito">
            √ó
          </button>
        </div>
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-summary">
          <p>Total: $<span id="cartTotal">0</span></p>
          <button class="checkout-btn">Finalizar Compra</button>
        </div>
      </div>
    </header>

    <nav class="mobile-menu" id="mobileMenu" aria-label="Men√∫ principal">
      <div class="menu-header">
        <h4>Men√∫ Principal</h4>
      </div>
      <ul class="menu-list">
        <li>
          <a href="../index.html#inicio" class="menu-link"
            ><span>Inicio</span></a
          >
        </li>
        <li>
          <a href="../index.html#lazos" class="menu-link"><span>Lazos</span></a>
        </li>
        <li>
          <a href="../index.html#monos" class="menu-link"><span>Mo√±os</span></a>
        </li>
        <li>
          <a href="../index.html#colitas" class="menu-link"
            ><span>Colitas</span></a
          >
        </li>
        <li>
          <a href="../index.html#scrunchies" class="menu-link"
            ><span>Scrunchies</span></a
          >
        </li>
        <li>
          <a href="../index.html#setmonos" class="menu-link"
            ><span>Set Mo√±os</span></a
          >
        </li>
      </ul>
    </nav>

    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- Auth Modal -->
    <div id="authModal" class="auth-modal" style="display: none;">
      <div class="auth-modal-content">
        <button class="auth-close">
          <img src="../img-galery/close.svg" alt="Cerrar">
        </button>
        <div class="auth-tabs" id="authTabs">
          <button class="auth-tab active" data-tab="login">Iniciar Sesi√≥n</button>
          <button class="auth-tab" data-tab="register">Registrarse</button>
        </div>
        
        <div class="user-tabs" id="userTabs" style="display: none;">
          <button class="user-tab active" data-tab="profile">üë§ Perfil</button>
          <button class="user-tab" data-tab="stats">üìä Stats</button>
          <button class="user-tab" data-tab="likes">‚ù§Ô∏è Likes</button>
          <button class="user-tab" data-tab="settings">‚öôÔ∏è Config</button>
        </div>
        
        <div id="loginForm" class="auth-form active">
          <h3>Iniciar Sesi√≥n</h3>
          <div class="input-group">
            <input type="email" id="loginEmail" placeholder="Correo electr√≥nico" required>
          </div>
          <div class="input-group">
            <input type="password" id="loginPassword" placeholder="Contrase√±a" required>
          </div>
          <button id="loginBtn" class="auth-btn">Iniciar Sesi√≥n</button>
          <div class="forgot-password">
            <a href="#" id="forgotPasswordLink">¬øOlvidaste tu contrase√±a?</a>
          </div>
          <div class="auth-divider">- o -</div>
          <button id="googleLoginBtn" class="google-btn">
            <img src="../img-galery/Google.png" alt="Google">
            Continuar con Google
          </button>
        </div>

        <div id="registerForm" class="auth-form">
          <h3>Crear Cuenta</h3>
          <div class="input-group">
            <input type="text" id="registerUsername" placeholder="Nombre de usuario (m√°x. 15 caracteres)" maxlength="15" required>
            <div class="input-hint">Solo letras, n√∫meros y guiones bajos</div>
          </div>
          <div class="input-group">
            <input type="email" id="registerEmail" placeholder="Correo electr√≥nico" required>
          </div>
          <div class="input-group">
            <input type="password" id="registerPassword" placeholder="Contrase√±a (m√≠n. 6 caracteres)" required>
            <div class="input-hint">M√≠nimo 6 caracteres</div>
            <div class="password-strength">
              <div class="password-strength-bar" id="passwordStrengthBar"></div>
            </div>
          </div>
          <div class="input-group">
            <input type="password" id="confirmPassword" placeholder="Repetir contrase√±a" required>
            <div class="input-hint">Debe coincidir con la contrase√±a anterior</div>
          </div>
          <div class="input-group">
            <label for="profileImage" class="profile-image-label">Foto de perfil (opcional, m√°x. 1MB):</label>
            <input type="file" id="profileImage" accept="image/*" class="profile-image-input">
            <div class="input-hint">JPG, PNG o GIF - M√°ximo 1MB</div>
          </div>
          <div class="captcha-container">
            <div class="captcha-question">Escribe los n√∫meros que ves:</div>
            <canvas id="captchaCanvas" width="120" height="40"></canvas>
            <button type="button" id="refreshCaptcha" class="refresh-captcha">
              <img src="../img-galery/reset.svg" alt="Regenerar" width="16" height="16">
            </button>
            <input type="text" id="captchaInput" class="captcha-input" placeholder="N√∫meros" maxlength="5" required>
          </div>
          <button id="registerBtn" class="auth-btn">Crear Cuenta</button>
        </div>

        <div id="userProfile" class="user-profile" style="display: none;">
          <h3>Mi Perfil</h3>
          <div class="profile-header">
            <div class="profile-picture-container">
              <img id="userProfilePic" class="profile-picture" src="" alt="Foto de perfil">
            </div>
            <div class="profile-name">
              <h4 id="userDisplayNameHeader"></h4>
            </div>
          </div>
          <div class="user-info">
            <div class="user-info-item">
              <span class="user-info-label">Email:</span>
              <span class="user-info-value" id="userEmail"></span>
            </div>
            <div class="user-info-item">
              <span class="user-info-label">Cuenta creada:</span>
              <span class="user-info-value" id="userCreated"></span>
            </div>
            <div class="user-info-item">
              <span class="user-info-label">√öltima conexi√≥n:</span>
              <span class="user-info-value" id="userLastLogin"></span>
            </div>
            <div class="user-info-item">
              <span class="user-info-label">Rango:</span>
              <span class="user-info-value" id="userRole"></span>
            </div>
            <div class="user-info-item" id="tempPasswordItem" style="display: none;">
              <span class="user-info-label">Contrase√±a temporal:</span>
              <span class="user-info-value" id="userTempPassword"></span>
            </div>
            <div class="user-info-item" id="loginOptionsItem" style="display: none;">
              <span class="user-info-label">Opciones de login:</span>
              <span class="user-info-value" id="userLoginOptions"></span>
            </div>
          </div>
          <button id="editProfileBtn" class="auth-btn" style="margin-bottom: 0.5rem;">Editar Perfil</button>
          <button id="logoutBtn" class="logout-btn">Cerrar Sesi√≥n</button>
        </div>
        
        <div id="userLikes" class="user-content" style="display: none;">
          <h3>‚ù§Ô∏è Mis Productos Favoritos</h3>
          <div class="likes-header">
            <div class="likes-count">Total: <span id="likesCount">0</span> productos</div>
            <button class="clear-likes-btn" id="clearLikesBtn">üóëÔ∏è Limpiar Todo</button>
          </div>
          <div class="likes-grid" id="likesGrid">
            <p class="empty-state">No tienes productos en favoritos a√∫n</p>
          </div>
        </div>
        
        <div id="userStats" class="user-content" style="display: none;">
          <h3>üìä Mis Estad√≠sticas</h3>
          <div class="stats-container">
            <div class="stat-card">
              <div class="stat-icon">üõí</div>
              <div class="stat-info">
                <div class="stat-number" id="totalPurchases">0</div>
                <div class="stat-label">Compras Realizadas</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">‚ù§Ô∏è</div>
              <div class="stat-info">
                <div class="stat-number" id="totalLikes">0</div>
                <div class="stat-label">Productos Favoritos</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">üîñ</div>
              <div class="stat-info">
                <div class="stat-number" id="totalSaved">0</div>
                <div class="stat-label">Productos Guardados</div>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">‚≠ê</div>
              <div class="stat-info">
                <div class="stat-number" id="userLevel">1</div>
                <div class="stat-label">Nivel de Usuario</div>
              </div>
            </div>
          </div>
          <div class="activity-timeline">
            <h4>üìà Actividad Reciente</h4>
            <div class="timeline" id="activityTimeline">
              <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                  <div class="timeline-title">¬°Bienvenido!</div>
                  <div class="timeline-date">Cuenta creada</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div id="userSaved" class="user-content" style="display: none;">
          <h3>üîñ Productos Guardados</h3>
          <div class="saved-grid" id="savedGrid">
            <p class="empty-state">No tienes productos guardados a√∫n</p>
          </div>
        </div>
        
        <div id="userNotifications" class="user-content" style="display: none;">
          <h3>üîî Notificaciones</h3>
          <div class="notifications-container">
            <div class="notification-filters">
              <button class="notif-filter active" data-filter="all">Todas</button>
              <button class="notif-filter" data-filter="system">Sistema</button>
              <button class="notif-filter" data-filter="offers">Ofertas</button>
            </div>
            <div class="notifications-list" id="notificationsList">
              <div class="notification-item unread">
                <div class="notif-icon">üéâ</div>
                <div class="notif-content">
                  <div class="notif-title">¬°Bienvenido!</div>
                  <div class="notif-text">Gracias por crear tu cuenta</div>
                  <div class="notif-time">Hace 1 d√≠a</div>
                </div>
              </div>
            </div>
            <div class="notifications-actions">
              <button class="clear-notif-btn" id="clearNotificationsBtn">Limpiar Todo</button>
            </div>
          </div>
        </div>
        
        <div id="userSettings" class="user-content" style="display: none;">
          <h3>‚öôÔ∏è Configuraci√≥n de Cuenta</h3>
          <div class="settings-container">
            <div class="setting-group">
              <h4>üîî Notificaciones</h4>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="emailNotifications" checked>
                  <span class="setting-toggle"></span>
                  Notificaciones por email
                </label>
              </div>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="promotionNotifications" checked>
                  <span class="setting-toggle"></span>
                  Ofertas y promociones
                </label>
              </div>
            </div>
            
            <div class="setting-group">
              <h4>üé® Apariencia</h4>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="animationsEnabled" checked>
                  <span class="setting-toggle"></span>
                  Animaciones mejoradas
                </label>
              </div>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="compactMode">
                  <span class="setting-toggle"></span>
                  Modo compacto
                </label>
              </div>
            </div>
            
            <div class="setting-group">
              <h4>üîí Privacidad</h4>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="profilePublic">
                  <span class="setting-toggle"></span>
                  Perfil p√∫blico
                </label>
              </div>
              <div class="setting-item">
                <label class="setting-label">
                  <input type="checkbox" id="activityVisible">
                  <span class="setting-toggle"></span>
                  Mostrar actividad
                </label>
              </div>
            </div>
            
            <div class="setting-group danger-zone">
              <h4>‚ö†Ô∏è Zona Peligrosa</h4>
              <button class="danger-btn" id="deleteAccountBtn">üóëÔ∏è Eliminar Cuenta</button>
              <p class="danger-text">Esta acci√≥n no se puede deshacer</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de zoom para im√°genes -->
    <div
      class="image-zoom-modal"
      id="imageZoomModal"
      aria-hidden="true"
      role="dialog"
      aria-label="Zoom de imagen"
    >
      <div class="zoom-overlay" id="zoomOverlay" tabindex="-1"></div>
      <div class="zoom-container">
        <button class="zoom-close" id="zoomClose" aria-label="Cerrar zoom">
          <i class="fas fa-times"></i>
        </button>
        <button class="zoom-prev" id="zoomPrev" aria-label="Imagen anterior">
          <i class="fas fa-chevron-left"></i>
        </button>
        <button class="zoom-next" id="zoomNext" aria-label="Imagen siguiente">
          <i class="fas fa-chevron-right"></i>
        </button>
        <img class="zoom-image" id="zoomImage" src="" alt="" />
        <div
          class="zoom-counter"
          id="zoomCounter"
          aria-live="polite"
          aria-atomic="true"
        >
          1 / 1
        </div>
      </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="auth-modal" style="display: none">
      <div class="auth-modal-content">
        <button class="auth-close">
          <img src="../img-galery/close.svg" alt="Cerrar" />
        </button>
        <div class="auth-tabs" id="authTabs">
          <button class="auth-tab active" data-tab="login">
            Iniciar Sesi√≥n
          </button>
          <button class="auth-tab" data-tab="register">Registrarse</button>
        </div>

        <div class="user-tabs" id="userTabs" style="display: none">
          <button class="user-tab active" data-tab="profile">
            <img
              src="../img-galery/profile.svg"
              alt=""
              style="
                width: 16px;
                height: 16px;
                margin-right: 4px;
                vertical-align: middle;
              "
            />
            Perfil
          </button>
          <button class="user-tab" data-tab="stats">
            <img
              src="../img-galery/stats.svg"
              alt=""
              style="
                width: 16px;
                height: 16px;
                margin-right: 4px;
                vertical-align: middle;
              "
            />
            Stats
          </button>
        </div>

        <div id="loginForm" class="auth-form active">
          <h3>Iniciar Sesi√≥n</h3>
          <div class="input-group">
            <input
              type="text"
              id="loginEmail"
              placeholder="Correo electr√≥nico o nombre de usuario"
              required
            />
          </div>
          <div class="input-group">
            <div class="password-input-container">
              <input
                type="password"
                id="loginPassword"
                placeholder="Contrase√±a"
                required
              />
              <button
                type="button"
                class="password-toggle"
                data-target="loginPassword"
              >
                <img src="../img-galery/ojos.svg" alt="Mostrar contrase√±a" />
              </button>
            </div>
          </div>
          <button id="loginBtn" class="auth-btn">Iniciar Sesi√≥n</button>
          <div class="forgot-password">
            <a href="#" id="forgotPasswordLink">¬øOlvidaste tu contrase√±a?</a>
          </div>
          <div class="auth-divider">- o -</div>
          <button id="googleLoginBtn" class="google-btn">
            <img src="../img-galery/Google.png" alt="Google" />
            Continuar con Google
          </button>
        </div>

        <div id="registerForm" class="auth-form compact">
          <h3>Crear Cuenta</h3>
          <div class="input-row">
            <div class="input-group half">
              <input
                type="text"
                id="registerUsername"
                placeholder="Usuario (m√°x. 15)"
                maxlength="15"
                required
              />
            </div>
            <div class="input-group half">
              <input
                type="email"
                id="registerEmail"
                placeholder="Email"
                required
              />
            </div>
          </div>
          <div class="input-row">
            <div class="input-group half">
              <div class="password-input-container">
                <input
                  type="password"
                  id="registerPassword"
                  placeholder="Contrase√±a (m√≠n. 6)"
                  required
                />
                <button
                  type="button"
                  class="password-toggle"
                  data-target="registerPassword"
                >
                  <img src="../img-galery/ojos.svg" alt="Mostrar contrase√±a" />
                </button>
              </div>
              <div class="password-strength">
                <div
                  class="password-strength-bar"
                  id="passwordStrengthBar"
                ></div>
              </div>
            </div>
            <div class="input-group half">
              <div class="password-input-container">
                <input
                  type="password"
                  id="confirmPassword"
                  placeholder="Repetir contrase√±a"
                  required
                />
                <button
                  type="button"
                  class="password-toggle"
                  data-target="confirmPassword"
                >
                  <img src="../img-galery/ojos.svg" alt="Mostrar contrase√±a" />
                </button>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label class="profile-image-label">Foto de perfil</label>
            <input
              type="file"
              id="profileImage"
              accept="image/*"
              class="profile-image-input"
              placeholder="Foto (opcional)"
            />
          </div>
          <div class="captcha-container compact">
            <div class="captcha-question">Escribe lo que ves:</div>
            <div class="captcha-row">
              <canvas id="captchaCanvas" width="100" height="30"></canvas>
              <button type="button" id="refreshCaptcha" class="refresh-captcha">
                <img
                  src="../img-galery/reset.svg"
                  alt="Regenerar"
                  width="14"
                  height="14"
                />
              </button>
              <input
                type="text"
                id="captchaInput"
                class="captcha-input"
                placeholder="N√∫meros"
                maxlength="5"
                required
              />
            </div>
          </div>
          <button id="registerBtn" class="auth-btn">Crear Cuenta</button>
        </div>

        <div id="userProfile" class="user-profile" style="display: none">
          <h3>Mi Perfil</h3>
          <div class="profile-header">
            <div class="profile-picture-container">
              <img
                id="userProfilePic"
                class="profile-picture"
                src=""
                alt="Foto de perfil"
              />
              <div class="status-indicator" id="userStatusIndicator"></div>
            </div>
            <div class="profile-name">
              <h4 id="userDisplayNameHeader"></h4>
            </div>
          </div>
          <div class="user-info">
            <div class="user-info-item">
              <span class="user-info-label">Email:</span>
              <span class="user-info-value" id="userEmail"></span>
            </div>
            <div class="user-info-item">
              <span class="user-info-label">Cuenta creada:</span>
              <span class="user-info-value" id="userCreated"></span>
            </div>
            <div class="user-info-item">
              <span class="user-info-label">√öltima conexi√≥n:</span>
              <span class="user-info-value" id="userLastLogin"></span>
            </div>
            <div class="user-info-item">
              <span class="user-info-label">Rango:</span>
              <span class="user-info-value" id="userRole"></span>
            </div>
            <div
              class="user-info-item"
              id="tempPasswordItem"
              style="display: none"
            >
              <span class="user-info-label">Contrase√±a temporal:</span>
              <span class="user-info-value" id="userTempPassword"></span>
            </div>
            <div
              class="user-info-item"
              id="loginOptionsItem"
              style="display: none"
            >
              <span class="user-info-label">Opciones de login:</span>
              <span class="user-info-value" id="userLoginOptions"></span>
            </div>
          </div>
          <button
            id="editProfileBtn"
            class="auth-btn"
            style="margin-bottom: 0.5rem"
          >
            Editar Perfil
          </button>
          <button id="logoutBtn" class="logout-btn">Cerrar Sesi√≥n</button>
        </div>

        <div id="userStats" class="user-content" style="display: none">
          <h3>Mis Estad√≠sticas</h3>
          <div class="stats-container">
            <div class="stat-card">
              <img
                src="../img-galery/heartprofile.svg"
                alt=""
                class="stat-icon"
                style="width: 2rem; height: 2rem"
              />
              <div class="stat-number" id="totalLikes">0</div>
              <div class="stat-label">Productos Favoritos</div>
            </div>
            <div class="stat-card">
              <img
                src="../img-galery/star.svg"
                alt=""
                class="stat-icon"
                style="width: 2rem; height: 2rem"
              />
              <div class="stat-number" id="userLevel">1</div>
              <div class="stat-label">Nivel de Usuario</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <main class="main-content">
      <div class="back-button-container">
        <button
          class="back-button"
          onclick="history.back()"
          aria-label="Volver a la p√°gina anterior"
        >
          <i class="fas fa-arrow-left"></i> Volver
        </button>
      </div>
      <div
        id="detalle"
        class="detalle-producto"
        tabindex="0"
        aria-live="polite"
        aria-atomic="true"
      >
        <!-- El contenido del producto se cargar√° aqu√≠ din√°micamente con JavaScript -->
      </div>

      <!-- Secci√≥n de Comentarios -->
      <section
        class="comments-section"
        aria-label="Comentarios del producto"
      >
        <h2 id="commentsTitle">Comentarios (0)</h2>
        
        <div class="comment-form">
          <h3>Agregar comentario</h3>
          <textarea
            id="commentInput"
            placeholder="Escribe tu comentario aqu√≠..."
            rows="3"
            aria-label="Escribe tu comentario"
          ></textarea>
          <button id="postCommentBtn" class="primary-action-btn">
            Comentar
          </button>
        </div>
        
        <div
          class="comments-list"
          id="commentsList"
          tabindex="0"
          aria-live="polite"
          aria-atomic="true"
        >
          <!-- Los comentarios se cargar√°n aqu√≠ -->
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2024 Accesorios. Todos los derechos reservados.</p>
        <div class="social-links">
          <a
            href="https://www.instagram.com/yourprofile"
            target="_blank"
            aria-label="Instagram"
            ><i class="fab fa-instagram"></i
          ></a>
          <a
            href="https://www.facebook.com/yourprofile"
            target="_blank"
            aria-label="Facebook"
            ><i class="fab fa-facebook-f"></i
          ></a>
          <a
            href="https://www.tiktok.com/@yourprofile"
            target="_blank"
            aria-label="TikTok"
            ><i class="fab fa-tiktok"></i
          ></a>
          <a
            href="https://wa.me/5491166135708"
            target="_blank"
            aria-label="WhatsApp"
            ><i class="fab fa-whatsapp"></i
          ></a>
        </div>
      </div>
    </footer>

    <script src="../data.js"></script>
    <script src="details.js"></script>
    <script type="module" src="../firebase.js"></script>
    <script type="module" src="../firestore-functions.js"></script>
    <script src="../auth.js"></script>
    
    <!-- Quick Auth Fix -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Show modal when account button is clicked
        document.querySelectorAll('.account-toggle').forEach(btn => {
          btn.addEventListener('click', function() {
            document.getElementById('authModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
          });
        });
        
        // Close modal
        document.querySelector('.auth-close').addEventListener('click', function() {
          document.getElementById('authModal').style.display = 'none';
          document.body.style.overflow = 'auto';
        });
        
        // Tab switching
        document.querySelectorAll('.auth-tab').forEach(tab => {
          tab.addEventListener('click', function() {
            const tabType = this.dataset.tab;
            
            // Remove active from all tabs and forms
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            // Add active to clicked tab
            this.classList.add('active');
            
            // Show corresponding form
            if (tabType === 'login') {
              document.getElementById('loginForm').classList.add('active');
            } else {
              document.getElementById('registerForm').classList.add('active');
            }
          });
        });
        
        // Close modal when clicking outside
        document.getElementById('authModal').addEventListener('click', function(e) {
          if (e.target === this) {
            this.style.display = 'none';
            document.body.style.overflow = 'auto';
          }
        });
      });
    </script>
  </body>
</html>
